(()=>{"use strict";(()=>{const e=()=>{const e=document.querySelectorAll(".edac-panel");e.length&&e.forEach((e=>{e.style.display="none",e.classList.remove("active"),e.setAttribute("aria-selected","false");const t=document.querySelector("#"+e.getAttribute("aria-labelledby"));t&&(t.classList.remove("active"),t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1"))}))},t=edac_script_vars;jQuery,jQuery((function(){jQuery("input[type=checkbox][name=edac_add_footer_accessibility_statement]").on("change",(function(){this.checked?jQuery("input[type=checkbox][name=edac_include_accessibility_statement_link]").prop("disabled",!1):(jQuery("input[type=checkbox][name=edac_include_accessibility_statement_link]").prop("disabled",!0),jQuery("input[type=checkbox][name=edac_include_accessibility_statement_link]").prop("checked",!1))})),"none"===jQuery("input[type=radio][name=edac_simplified_summary_position]:checked").val()&&jQuery("#ac-simplified-summary-option-code").show(),jQuery("input[type=radio][name=edac_simplified_summary_position]").on("load",(function(){"none"===this.value?jQuery("#ac-simplified-summary-option-code").show():jQuery("#ac-simplified-summary-option-code").hide()}))})),jQuery(window).on("load",(function(){const a=()=>{e();const t=jQuery("#edac-summary-panel");jQuery(t).show().addClass("active");const a="#"+jQuery(t).attr("aria-labelledby");jQuery(a).addClass("active").attr("aria-selected","true").removeAttr("tabindex"),s(),c()};top.addEventListener("edac_js_scan_save_complete",(function(e){a()}));const c=()=>{!function(e=null){const a=t.postID;null!==a&&jQuery.ajax({url:ajaxurl,method:"GET",data:{action:"edac_summary_ajax",post_id:a,nonce:t.nonce}}).done((function(t){if(!0===t.success){const a=jQuery.parseJSON(t.data);jQuery(".edac-summary").html(a.content),"function"==typeof e&&e()}else console.log(t)}))}((()=>{!function(){const e=t.postID;null!==e&&jQuery.ajax({url:ajaxurl,method:"GET",data:{action:"edac_readability_ajax",post_id:e,nonce:t.nonce}}).done((function(a){if(!0===a.success){const s=jQuery.parseJSON(a.data);jQuery("#edac-readability-panel").html(s),jQuery(".edac-readability-simplified-summary").submit((function(a){a.preventDefault();const s=jQuery("#edac-readability-text").val();jQuery.ajax({url:ajaxurl,method:"GET",data:{action:"edac_update_simplified_summary",post_id:e,summary:s,nonce:t.nonce}}).done((function(e){!0===e.success?(jQuery.parseJSON(e.data),c()):console.log(e)}))}))}else console.log(a)}))}(),jQuery(".edac-panel").removeClass("edac-panel-loading")}))};function s(){const e=t.postID;null!==e&&jQuery.ajax({url:ajaxurl,method:"GET",data:{action:"edac_details_ajax",post_id:e,nonce:t.nonce}}).done((function(e){if(!0===e.success){const t=jQuery.parseJSON(e.data);jQuery("#edac-details-panel").html(t),jQuery(".edac-details-rule-title").click((function(){jQuery(this).hasClass("active")?(jQuery(this).next().slideUp(),jQuery(this).removeClass("active")):(jQuery(this).next().slideDown(),jQuery(this).addClass("active"))})),jQuery(".edac-details-rule-title-arrow").click((function(e){e.preventDefault(),"true"===jQuery(this).attr("aria-expanded")?jQuery(this).attr("aria-expanded","false"):jQuery(this).attr("aria-expanded","true")})),jQuery(".edac-details-rule-records-record-actions-ignore").click((function(e){e.preventDefault(),jQuery(this).parent().next(".edac-details-rule-records-record-ignore").slideToggle(),"true"===jQuery(this).attr("aria-expanded")?jQuery(this).attr("aria-expanded","false"):jQuery(this).attr("aria-expanded","true")})),r()}else console.log(e)}))}if(!document.body.classList.contains("widgets-php")&&document.body.classList.contains("block-editor-page")){const e=wp.data.select("core/edit-post");let t=!1;wp.data.subscribe((function(){const c=e.isSavingMetaBoxes();c&&jQuery(".edac-panel").addClass("edac-panel-loading"),c===t||c||(t=c,a()),t=c}))}function r(){jQuery(".edac-details-rule-records-record-ignore-submit").click((function(e){e.preventDefault();const a=[jQuery(this).attr("data-id")],c=jQuery(this).attr("data-action"),s=jQuery(this).attr("data-type"),r=jQuery(".edac-details-rule-records-record-ignore-comment",jQuery(this).parent()).val();jQuery.ajax({url:ajaxurl,method:"GET",data:{action:"edac_insert_ignore_data",ids:a,comment:r,ignore_action:c,ignore_type:s,nonce:t.nonce}}).done((function(e){if(!0===e.success){const t=jQuery.parseJSON(e.data),c="#edac-details-rule-records-record-"+t.ids[0],s="enable"===t.action?"disable":"enable",r="enable"===t.action,n="enable"===t.action?"Ignored":"Ignore",o="enable"===t.action?"Stop Ignoring":"Ignore This "+t.type,i=t.user?"<strong>Username:</strong> "+t.user:"",d=t.date?"<strong>Date:</strong> "+t.date:"";jQuery(c+" .edac-details-rule-records-record-ignore-submit").attr("data-action",s),jQuery(c+" .edac-details-rule-records-record-ignore-comment").attr("disabled",r),"enable"!==t.action&&jQuery(c+" .edac-details-rule-records-record-ignore-comment").val(""),jQuery(c+" .edac-details-rule-records-record-actions-ignore").toggleClass("active"),jQuery(".edac-details-rule-records-record-actions-ignore[data-id='"+a[0]+"']").toggleClass("active"),jQuery(c+" .edac-details-rule-records-record-actions-ignore-label").html(n),jQuery(".edac-details-rule-records-record-actions-ignore[data-id='"+a[0]+"'] .edac-details-rule-records-record-actions-ignore-label").html(n),jQuery(c+" .edac-details-rule-records-record-ignore-submit-label").html(o),jQuery(c+" .edac-details-rule-records-record-ignore-info-user").html(i),jQuery(c+" .edac-details-rule-records-record-ignore-info-date").html(d);const l=jQuery(c).parents(".edac-details-rule");let u=parseInt(jQuery(".edac-details-rule-count",l).html());"enable"===t.action?u--:"disable"===t.action&&u++,0===u?jQuery(".edac-details-rule-count",l).removeClass("active"):jQuery(".edac-details-rule-count",l).addClass("active"),u.toString(),jQuery(".edac-details-rule-count",l).html(u);let y=parseInt(jQuery(".edac-details-rule-count-ignore",l).html());"enable"===t.action?y++:"disable"===t.action&&y--,0===y?jQuery(".edac-details-rule-count-ignore",l).hide():jQuery(".edac-details-rule-count-ignore",l).show(),y.toString(),jQuery(".edac-details-rule-count-ignore",l).html(y+" Ignored Items"),(jQuery("body").hasClass("accessibility-checker_page_accessibility_checker_issues")||jQuery("body").hasClass("accessibility-checker_page_accessibility_checker_ignored"))&&location.reload(!0)}else console.log(e)}))}))}function n(e,a){jQuery.ajax({url:ajaxurl,method:"GET",data:{action:"edac_review_notice_ajax",review_action:e,nonce:t.nonce}}).done((function(e){!0===e.success&&(jQuery.parseJSON(e.data),jQuery(".edac-review-notice").fadeOut(),a&&(window.location.href="https://wordpress.org/support/plugin/accessibility-checker/reviews/#new-post"))}))}function o(e=null){jQuery.ajax({url:ajaxurl,method:"GET",data:{action:e,nonce:t.nonce}}).done((function(e){!0===e.success&&jQuery.parseJSON(e.data)}))}jQuery(".edac-review-notice").length&&(jQuery(".edac-review-notice-review").on("click",(function(){n("stop",!0)})),jQuery(".edac-review-notice-remind").on("click",(function(){n("pause",!1)})),jQuery(".edac-review-notice-dismiss").on("click",(function(){n("stop",!1)}))),jQuery(".edac_password_protected_notice").length&&jQuery(".edac_password_protected_notice").on("click",(function(){jQuery.ajax({url:ajaxurl,method:"GET",data:{action:"edac_password_protected_notice_ajax",nonce:t.nonce}}).done((function(e){!0===e.success&&jQuery.parseJSON(e.data)}))})),jQuery(".edac_gaad_notice").length&&jQuery(".edac_gaad_notice .notice-dismiss").on("click",(function(){o("edac_gaad_notice_ajax")})),jQuery(".edac_black_friday_notice").length&&jQuery(".edac_black_friday_notice .notice-dismiss").on("click",(function(){o("edac_black_friday_notice_ajax")})),jQuery("#edac-summary-panel").length&&(c(),s(),r()),jQuery(".edac-details-rule-records-record-ignore").length&&r(),jQuery("#edac-readability-panel").length&&c(),jQuery("#dismiss_welcome_cta").on("click",(function(){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"edac_dismiss_welcome_cta_ajax"},success(e){"success"===e&&jQuery("#edac_welcome_page_summary").hide()}})}));const i=document.querySelector(".edac-widget-modal-content-close");i&&i.addEventListener("click",(function(e){const t=e.target.closest(".edac-widget-modal");t&&(t.style.display="none"),document.querySelector(".edac-summary").remove(),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"edac_dismiss_dashboard_cta_ajax"}})}))})),window.addEventListener("load",(function(){document.getElementById("edac-tabs")&&(()=>{const t=document.querySelectorAll(".edac-tab button");t.forEach(((a,c)=>{a.addEventListener("click",(t=>{if(!(t.target instanceof HTMLButtonElement)&&"undefined"!==t.target.getAttribute("aria-controls"))return;const a=document.querySelector("#"+t.target.getAttribute("aria-controls"));a instanceof HTMLElement&&(t.preventDefault(),e(),a.style.display="block",a.classList.add("active"),t.target.classList.add("active"),t.target.setAttribute("aria-selected",!0),t.target.removeAttribute("tabindex"),t.target.focus())})),a.addEventListener("keydown",(e=>{if("Enter"!==e.key&&13!==e.keyCode&&"Space"!==e.key&&32!==e.keyCode||t[c].click(),"ArrowRight"===e.key||39===e.keyCode){let e=c+1;e>t.length&&(e=0),t[e].click()}if("ArrowLeft"===e.key||37===e.keyCode){let e=c-1;e<0&&(e=t.length-1),t[e].click()}"Home"!==e.key&&36!==e.keyCode||(t[0].click(),e.preventDefault()),"End"!==e.key&&35!==e.keyCode||(t[t.length-1].click(),e.preventDefault())}))}))})(),this.document.querySelector(".edac-widget .edac-summary")&&a(),this.document.querySelector("#edac_clear_cached_stats")&&this.document.querySelector("#edac_clear_cached_stats").addEventListener("click",(function(){const e=document.querySelector("#edac_welcome_page_summary .edac-welcome-grid-container");e&&e.classList.add("edac-panel-loading"),r(t.edacApiUrl+"/clear-cached-scans-stats").then((t=>{t.success&&(e&&e.classList.remove("edac-panel-loading"),window.location.reload())}))})),c()}));const a=()=>{s(t.edacApiUrl+"/scans-stats").then((e=>{if(e.success){const t=e.stats.passed_percentage,a=e.stats.passed_percentage_formatted,c=document.querySelector("#edac-summary-passed");c&&(c.setAttribute("aria-valuenow",t),c.style.background="radial-gradient(closest-side, white 85%, transparent 80% 100%), conic-gradient(#006600 "+t+"%, #e2e4e7 0)");const s=document.querySelector("#edac-summary-passed .edac-progress-percentage");s&&(s.textContent=a);const r=e.stats.cached_at_formatted||e.stats.fullscan_completed_at_formatted;document.getElementById("edac-summary-info-date").textContent=r;const n=e.stats.posts_scanned,o=e.stats.posts_scanned_formatted,i=document.querySelector("#edac-summary-info-count");i&&(i.textContent=o);const d=e.stats.distinct_errors_without_contrast,l=e.stats.distinct_errors_without_contrast_formatted,u=document.querySelector(".edac-summary-info-stats-box-error");d>0&&u&&u.classList.add("has-errors");const y=document.querySelector("#edac-summary-info-errors");y&&(y.textContent=l);const m=e.stats.distinct_contrast_errors,_=e.stats.distinct_contrast_errors_formatted,p=document.querySelector(".edac-summary-info-stats-box-contrast");d>0&&p&&p.classList.add("has-errors");const j=document.querySelector("#edac-summary-info-contrast-errors");j&&(j.textContent=_);const h=e.stats.distinct_warnings,f=e.stats.distinct_warnings_formatted,g=document.querySelector(".edac-summary-info-stats-box-warning");h>0&&g&&g.classList.add("has-warning");const Q=document.querySelector("#edac-summary-info-warnings");if(Q&&(Q.textContent=f),d+m+h>0){const e=document.querySelector(".edac-summary-notice-has-issues");e&&e.classList.remove("edac-hidden")}else{const e=document.querySelector(".edac-summary-notice-no-issues");e&&n>0&&e.classList.remove("edac-hidden")}const b=e.stats.is_truncated,v=document.querySelector(".edac-summary-notice-is-truncated");v&&b&&v.classList.remove("edac-hidden");const w=document.querySelector(".edac-summary.edac-modal-container");w&&w.classList.remove("edac-hidden")}})).catch((e=>{})),s(t.edacApiUrl+"/scans-stats-by-post-types").then((e=>{e.success&&Object.entries(e.stats).forEach((([t,a])=>{if(e.stats[t]){a.distinct_errors_without_contrast;const e=a.distinct_errors_without_contrast_formatted,c=(a.distinct_contrast_errors,a.distinct_contrast_errors_formatted),s=(a.distinct_warnings,a.distinct_warnings_formatted),r=document.querySelector("#"+t+"-errors");r&&(r.textContent=e);const n=document.querySelector("#"+t+"-contrast-errors");n&&(n.textContent=c);const o=document.querySelector("#"+t+"-warnings");o&&(o.textContent=s)}}));const t=document.querySelector(".edac-issues-summary");t&&t.classList.remove("edac-hidden"),c()})).catch((e=>{console.log(e)}))};function c(){const e={year:"numeric",month:"short",day:"numeric"};document.querySelectorAll(".edac-timestamp-to-local").forEach((function(t){if(/^[0-9]+$/.test(t.textContent)){const a=t.textContent,c=new Date(1e3*a).toLocaleDateString([],e),s=new Date(1e3*a).toLocaleTimeString([],{timeStyle:"short"}),r=Intl.DateTimeFormat([],{timeZoneName:"short"}).formatToParts(new Date);let n="";for(const e of r)if("timeZoneName"===e.type){n=e.value;break}t.innerHTML='<span class="edac-date">'+c+'</span>&nbsp;<span class="edac-time">'+s+'</span>&nbsp;<span class="edac-timezone">'+n+"</span>",t.classList.remove("edac-timestamp-to-local")}}))}const s=async(e="",t={})=>(await fetch(e,{method:"GET",headers:{"X-WP-Nonce":edac_script_vars.restNonce,"Content-Type":"application/json"}})).json(),r=async(e="",t={})=>(await fetch(e,{method:"POST",headers:{"X-WP-Nonce":edac_script_vars.restNonce,"Content-Type":"application/json"},body:JSON.stringify(t)})).json()})()})();